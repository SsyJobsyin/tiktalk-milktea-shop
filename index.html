<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>èŒ¶è¯­å¥¶èŒ¶ - é©¬å°¼æ‹‰åº—</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    
    <style>
        /* 1. éšè—æ»šåŠ¨æ¡ */
        .no-scrollbar::-webkit-scrollbar { display: none; }

        /* 2. åº•éƒ¨å¯¼èˆªæ é€‰ä¸­çŠ¶æ€ */
        .active-tab { 
            color: #f59e0b; 
            border-top: 2px solid #f59e0b; 
            font-weight: bold; 
        }

        /* 3. ä¼˜åŒ–å·¦ä¾§åˆ†ç±»æŒ‰é’®ï¼ˆé»˜è®¤çŠ¶æ€ï¼‰ */
        .cat-btn {
            transition: all 0.2s;
            border-left: 4px solid transparent;
            color: #666;
            background-color: #f3f4f6; /* æµ…ç°è‰²èƒŒæ™¯ï¼Œè®©å®ƒè·Ÿå³ä¾§åŒºåˆ†å¼€ */
        }

        /* 4. åˆ†ç±»æŒ‰é’®é€‰ä¸­çŠ¶æ€ï¼ˆå¢å¼ºç‰ˆï¼‰ */
        .category-active {
            background-color: #ffffff !important; /* é€‰ä¸­çš„æ—¶å€™å˜ç™½ï¼Œæ˜¾å¾—æ›´æœ‰ç«‹ä½“æ„Ÿ */
            color: #f59e0b !important;
            border-left: 4px solid #f59e0b !important;
            font-weight: 900 !important;
            box-shadow: inset 0 2px 4px rgba(0,0,0,0.02);
        }
        /* å¼¹çª—æŒ‰é’®æ ·å¼ */
        .spec-btn {
            padding: 6px 16px;
            border-radius: 8px;
            background: #f3f4f6;
            font-size: 12px;
            color: #666;
            border: 1px solid transparent;
        }
        .spec-btn.active {
            background: #fffbeb;
            color: #f59e0b;
            border-color: #f59e0b;
            font-weight: bold;
        }
        /* å¼¹å‡ºåŠ¨ç”» */
        @keyframes slideUp {
            from { transform: translateY(100%); }
            to { transform: translateY(0); }
        }
        .animate-slide-up { animation: slideUp 0.3s ease-out; }
        /* 1. å…¨å±€å­—ä½“æ”¾å¤§ä¸€ç‚¹ï¼Œé€‚åˆè§¦å± */
body {
    font-size: 16px;
    -webkit-tap-highlight-color: transparent; /* å»é™¤ç‚¹å‡»æ—¶çš„è“è‰²æ¡† */
}

/* 2. ç»™åº•éƒ¨èœå•ç•™å‡ºâ€œå®‰å…¨åŒºâ€ */
/* ç°åœ¨çš„æ‰‹æœºåº•éƒ¨éƒ½æœ‰æ¨ªæ¡ï¼Œæˆ‘ä»¬éœ€è¦å¢åŠ åº•éƒ¨å†…è¾¹è· */
.pb-safe {
    padding-bottom: calc(1rem + env(safe-area-inset-bottom));
}

/* 3. å¢å¼ºæŒ‰é’®çš„ç‚¹å‡»åé¦ˆ */
button:active {
    transform: scale(0.96);
    transition: transform 0.1s;
}

/* 4. å›¾ç‰‡è‡ªé€‚åº”ï¼Œé˜²æ­¢æŒ¤å‹ */
img {
    max-width: 100%;
    height: auto;
}
    </style>
</head>
<body class="bg-gray-50 flex flex-col h-screen overflow-hidden text-gray-800">

   <header class="bg-white px-6 py-3 shadow-sm shrink-0 flex items-center relative h-16">
    <div class="flex items-center">
        <div class="w-9 h-9 bg-gradient-to-br from-orange-400 to-orange-600 rounded-full flex items-center justify-center text-white font-serif italic text-lg shadow-md border-2 border-white">
            èŒ¶
        </div>
    </div>

    <div class="absolute left-1/2 -translate-x-1/2 flex flex-col items-center">
        <h1 class="text-lg font-black text-gray-800 tracking-widest uppercase" style="font-family: 'PingFang SC', sans-serif;">èŒ¶è¯­å¥¶èŒ¶</h1>
    </div>

    <div class="ml-auto flex items-center gap-2">
    <div class="flex items-center bg-gray-100 rounded-full p-1">
        <button id="lang-btn-zh" onclick="switchLang('zh')" class="px-2 py-1 text-[10px] rounded-full bg-white font-bold shadow-sm">ä¸­</button>
        <button id="lang-btn-en" onclick="switchLang('en')" class="px-2 py-1 text-[10px] rounded-full text-gray-500">EN</button>
    </div>

    <button id="pickup-btn"
        onclick="switchTab('pickup')"
        class="text-orange-500 border border-orange-200 px-3 py-1 rounded-full text-xs font-bold hover:bg-orange-50 transition-colors">
        å–å•å·
    </button>
</div>
</header>

    <main id="main-content" class="flex-1 overflow-hidden relative">
        <section id="page-home" class="p-4 overflow-y-auto h-full bg-gray-50">
            <div class="mb-6 overflow-hidden rounded-2xl shadow-lg relative h-44 bg-orange-100">
                <img src="https://images.unsplash.com/photo-1544787210-282bb2bb097c?auto=format&fit=crop&q=80&w=1000" class="w-full h-full object-cover" alt="å“ç‰Œæµ·æŠ¥"onerror="this.onerror=null; this.src='https://picsum.photos/1000/400';"
  class="w-full h-full object-cover"
  alt="å“ç‰Œæµ·æŠ¥">
                <div class="absolute inset-0 bg-gradient-to-t from-black/60 to-transparent flex items-end p-4">
                    <div>
                        <p class="text-white font-bold text-lg leading-tight">èŒ¶è¯­ Â· å¯»æ‰¾ä¸€æ¯å¥½èŒ¶</p>
                        <p class="text-white/80 text-[10px] mt-1 tracking-widest">SINCE 2018 | MANILA</p>
                    </div>
                </div>
            </div>

            <div class="bg-white rounded-2xl p-5 mb-4 shadow-sm border border-gray-100">
                <div class="flex items-center gap-2 mb-3">
                    <div class="w-3 h-5 bg-orange-500 rounded-full"></div>
                    <h2 class="text-sm font-bold text-gray-800">å…³äºèŒ¶è¯­</h2>
                </div>
                <p class="text-gray-500 text-xs leading-relaxed italic">
                    "ç«‹è¶³é©¬å°¼æ‹‰8å¹´ï¼Œæˆ‘ä»¬åšæŒä½¿ç”¨ä¼˜è´¨èŒ¶åº•ä¸æ–°é²œæ°´æœã€‚èŒ¶è¯­ï¼Œä¸ä»…æ˜¯ä¸€æ¯å¥¶èŒ¶ï¼Œæ›´æ˜¯å¯¹ç”Ÿæ´»çš„ä¸€ç§æ€åº¦ã€‚"
                </p>
            </div>

            <div class="grid grid-cols-2 gap-3 mb-6">
                <div class="bg-white p-3 rounded-xl shadow-sm border border-gray-100 flex items-center gap-3">
                    <div class="text-xl bg-orange-50 w-10 h-10 flex items-center justify-center rounded-lg">ğŸ•’</div>
                    <div>
                        <p class="text-[10px] text-gray-400">è¥ä¸šæ—¶é—´</p>
                        <p class="text-xs font-bold text-gray-700">09:00-22:30</p>
                    </div>
                </div>
                <div class="bg-white p-3 rounded-xl shadow-sm border border-gray-100 flex items-center gap-3">
                    <div class="text-xl bg-blue-50 w-10 h-10 flex items-center justify-center rounded-lg">ğŸšš</div>
                    <div>
                        <p class="text-[10px] text-gray-400">é…é€èŒƒå›´</p>
                        <p class="text-xs font-bold text-gray-700">é©¬å°¼æ‹‰å…¨åŸ</p>
                    </div>
                </div>
            </div>

            <div class="text-center py-4">
                <p class="text-[10px] text-gray-300">â€”â€” åŒ å¿ƒåˆ¶ä½œ æ¯ä¸€æ¯éƒ½æ˜¯æ–°é²œ â€”â€”</p>
            </div>
        </section>

        <section id="page-order" class="hidden flex h-full">
            <aside class="w-24 bg-gray-100 h-full overflow-y-auto no-scrollbar shrink-0">
                <nav id="category-list"></nav>
            </aside>
            <div class="flex-1 h-full overflow-y-auto p-4 pb-24" id="product-container" style="scroll-behavior: smooth;"></div>
        </section>

        <section id="page-pickup" class="hidden p-4 h-full overflow-y-auto bg-gray-50">
            <h2 class="text-lg font-bold mb-4">ğŸ”” å–å•è¿›åº¦</h2>
            <div class="bg-white p-6 rounded-2xl shadow-sm border border-orange-100 text-center">
                <p class="text-gray-400 mb-2">å½“å‰æš‚æ— å¯å–çš„è®¢å•</p>
                <button onclick="switchTab('order')" class="text-orange-500 font-bold">å»å–ä¸€æ¯ â”</button>
            </div>
        </section>

        <section id="page-me" class="hidden h-full overflow-y-auto bg-gray-50">
            <div class="bg-orange-500 p-8 text-white rounded-b-[40px] shadow-lg">
                <div class="flex items-center gap-4 mb-6">
                    <div class="w-16 h-16 bg-white rounded-full flex items-center justify-center text-3xl">ğŸ‘¤</div>
                    <div>
                        <h2 class="text-xl font-bold">èŒ¶è¯­è€å‹</h2>
                        <p class="text-sm opacity-80">é©¬å°¼æ‹‰ä¼šå‘˜</p>
                    </div>
                </div>
                <div class="grid grid-cols-3 gap-2 text-center bg-white/20 p-4 rounded-xl">
                    <div><p class="font-bold">0</p><p class="text-xs opacity-80">ç§¯åˆ†</p></div>
                    <div><p class="font-bold">2</p><p class="text-xs opacity-80">ä¼˜æƒ åˆ¸</p></div>
                    <div><p class="font-bold">â‚±0</p><p class="text-xs opacity-80">ä½™é¢</p></div>
                </div>
            </div>
            <div class="p-4 space-y-3 mt-4">
                <div class="bg-white p-4 rounded-xl flex justify-between items-center shadow-sm">
                    <span>ğŸ“ æˆ‘çš„æ”¶è´§åœ°å€</span><span class="text-gray-400">â”</span>
                </div>
                <div class="bg-white p-4 rounded-xl flex justify-between items-center shadow-sm">
                    <span>ğŸ“ è”ç³»å®¢æœ</span><span class="text-gray-400">â”</span>
                </div>
                <div class="bg-white p-4 rounded-xl flex justify-between items-center shadow-sm">
                    <span>âš™ï¸ ä¸ªäººè®¾ç½®</span><span class="text-gray-400">â”</span>
                </div>
            </div>
        </section>

        <section id="page-cart" class="hidden p-4 h-full overflow-y-auto">
            <h2 class="text-lg font-bold mb-4 border-b pb-2">æˆ‘çš„æ¸…å•</h2>
            <div id="cart-items-list" class="space-y-4"></div>
        </section>
    </main>

    <div id="cart-preview" class="hidden fixed bottom-20 left-4 right-4 bg-gray-900 text-white p-4 rounded-full flex justify-between items-center shadow-2xl z-50">
        <div class="flex items-center gap-4">
            <div class="relative">
                <span>ğŸ›’</span>
                <span id="cart-count" class="absolute -top-2 -right-2 bg-red-500 text-[10px] rounded-full w-4 h-4 flex items-center justify-center">0</span>
            </div>
            <p class="font-bold">â‚± <span id="cart-total">0</span></p>
        </div>
        <button onclick="switchTab('cart')" class="bg-yellow-500 text-black px-5 py-1.5 rounded-full text-sm font-bold">å»ç»“ç®—</button>
    </div>
<div id="spec-modal" class="fixed inset-0 bg-black/50 z-[100] hidden flex items-end">
    <div class="bg-white w-full rounded-t-3xl p-6 animate-slide-up">
        <div class="flex justify-between items-start mb-4">
            <div class="flex gap-4">
                <div id="modal-icon" class="text-4xl w-16 h-16 bg-gray-100 rounded-2xl flex items-center justify-center"></div>
                <div>
                    <h3 id="modal-name" class="font-bold text-lg"></h3>
                    <p id="modal-price" class="text-orange-500 font-bold text-xl"></p>
                </div>
            </div>
            <button onclick="closeModal()" class="text-gray-400 text-2xl">âœ•</button>
        </div>

        <div class="space-y-4 mb-8">
            <div>
                <p class="text-xs text-gray-400 mb-2">ç”œåº¦</p>
                <div class="flex gap-2" id="sugar-options">
                    <button onclick="selectSpec(this, 'sugar')" class="spec-btn active">å…¨ç³–</button>
                    <button onclick="selectSpec(this, 'sugar')" class="spec-btn">ä¸ƒåˆ†</button>
                    <button onclick="selectSpec(this, 'sugar')" class="spec-btn">äº”åˆ†</button>
                    <button onclick="selectSpec(this, 'sugar')" class="spec-btn">æ— ç³–</button>
                </div>
            </div>
            <div>
                <p class="text-xs text-gray-400 mb-2">å†°åº¦</p>
                <div class="flex gap-2" id="ice-options">
                    <button onclick="selectSpec(this, 'ice')" class="spec-btn active">æ­£å¸¸å†°</button>
                    <button onclick="selectSpec(this, 'ice')" class="spec-btn">å°‘å†°</button>
                    <button onclick="selectSpec(this, 'ice')" class="spec-btn">å»å†°</button>
                    <button onclick="selectSpec(this, 'ice')" class="spec-btn">å¸¸æ¸©</button>
                </div>
            </div>
        </div>

        <button onclick="confirmAddToCart()" class="w-full bg-yellow-400 py-4 rounded-xl font-bold shadow-lg active:scale-95 transition-transform">
            åŠ å…¥æ¸…å•
        </button>
    </div>
</div>

    <nav class="h-16 bg-white border-t flex items-center justify-around text-gray-500 shrink-0 z-50">
        <button onclick="switchTab('home')" id="tab-home" class="flex flex-col items-center">
            <span class="text-xl">ğŸ </span><span class="text-[10px]">é¦–é¡µ</span>
        </button>
        <button onclick="switchTab('order')" id="tab-order" class="flex flex-col items-center">
            <span class="text-xl">âœ‹</span><span class="text-[10px]">ç‚¹å•</span>
        </button>
        <button onclick="switchTab('pickup')" id="tab-pickup" class="flex flex-col items-center">
            <span class="text-xl">ğŸ«</span><span class="text-[10px]">å–å•</span>
        </button>
        <button onclick="switchTab('cart')" id="tab-cart" class="flex flex-col items-center">
            <span class="text-xl">ğŸ›’</span><span class="text-[10px]">æ¸…å•</span>
        </button>
        <button onclick="switchTab('me')" id="tab-me" class="flex flex-col items-center">
            <span class="text-xl">ğŸ‘¤</span><span class="text-[10px]">æˆ‘çš„</span>
        </button>
    </nav>

    <script>
        // --- æ•°æ®é…ç½® (å·²ä¿®å¤å®šä¹‰é”™è¯¯) ---
         const menuData = [
    // --- å¥¶ç›–ç³»åˆ— (M) ---
    { id: 'M15', category: 'å¥¶ç›–ç³»åˆ—', name: 'è“è“é…¸é…¸ä¹³', price: 180, desc: 'èŒ¶è¯­ç²¾é€‰', icon: 'ğŸ¥¤' },
    { id: 'M16', category: 'å¥¶ç›–ç³»åˆ—', name: 'æ©™æ©™é…¸é…¸ä¹³', price: 180, desc: 'èŒ¶è¯­ç²¾é€‰', icon: 'ğŸ¥¤' },
    { id: 'M17', category: 'å¥¶ç›–ç³»åˆ—', name: 'ç‰›æ²¹æœé…¸é…¸ä¹³', price: 220, desc: 'èŒ¶è¯­ç²¾é€‰', icon: 'ğŸ¥‘' },
    { id: 'M18', category: 'å¥¶ç›–ç³»åˆ—', name: 'èŠå£«å¤šè‚‰è‘¡è„', price: 200, desc: 'äººæ°”çˆ†æ¬¾', icon: 'ğŸ‡' },
    { id: 'M19', category: 'å¥¶ç›–ç³»åˆ—', name: 'é…¸å¥¶å¤šè‚‰è‘¡è„', price: 200, desc: 'èŒ¶è¯­ç²¾é€‰', icon: 'ğŸ‡' },
    { id: 'M20', category: 'å¥¶ç›–ç³»åˆ—', name: 'é…¸å¥¶è‰è“å•µå•µå†°', price: 200, desc: 'èŒ¶è¯­ç²¾é€‰', icon: 'ğŸ“' },
    { id: 'M21', category: 'å¥¶ç›–ç³»åˆ—', name: 'èŠèŠæ¡ƒæ¡ƒ', price: 200, desc: 'èŒ¶è¯­ç²¾é€‰', icon: 'ğŸ‘' },
    { id: 'M22', category: 'å¥¶ç›–ç³»åˆ—', name: 'é…¸å¥¶èŠèŠæ¡ƒæ¡ƒ', price: 200, desc: 'èŒ¶è¯­ç²¾é€‰', icon: 'ğŸ‘' },
    { id: 'M24', category: 'å¥¶ç›–ç³»åˆ—', name: 'æ¡‚èŠ±é…’é…¿å†°å¥¶', price: 200, desc: 'èŒ¶è¯­ç²¾é€‰', icon: 'ğŸ¶' },
    { id: 'M25', category: 'å¥¶ç›–ç³»åˆ—', name: 'ç”œæ©™é…¸å¥¶éœ²', price: 200, desc: 'èŒ¶è¯­ç²¾é€‰', icon: 'ğŸŠ' },
    { id: 'M26', category: 'å¥¶ç›–ç³»åˆ—', name: 'èŠèŠæµ·ç›å‡¤æ¢¨', price: 200, desc: 'èŒ¶è¯­ç²¾é€‰', icon: 'ğŸ' },
    { id: 'M27', category: 'å¥¶ç›–ç³»åˆ—', name: 'é²œæ¦¨æ©™å­èƒ¡èåœæ±', price: 220, desc: 'å¥åº·æ¨è', icon: 'ğŸ¥•' },
    { id: 'M28', category: 'å¥¶ç›–ç³»åˆ—', name: 'é²œæ¦¨é»„ç“œæŸ æª¬æ±', price: 220, desc: 'æ¸…çˆ½æ¨è', icon: 'ğŸ¥’' },
    { id: 'M29', category: 'å¥¶ç›–ç³»åˆ—', name: 'å‡¤æ¢¨é…¸å¥¶å†°', price: 200, desc: 'èŒ¶è¯­ç²¾é€‰', icon: 'ğŸ' },
    { id: 'M30', category: 'å¥¶ç›–ç³»åˆ—', name: 'èŠå£«å¤šè‚‰é’æ', price: 200, desc: 'èŒ¶è¯­ç²¾é€‰', icon: 'ğŸ‡' },
    { id: 'M31', category: 'å¥¶ç›–ç³»åˆ—', name: 'é’æé…¸å¥¶å†°', price: 200, desc: 'èŒ¶è¯­ç²¾é€‰', icon: 'ğŸ‡' },
    { id: 'M32', category: 'å¥¶ç›–ç³»åˆ—', name: 'èŠèŠè“è“', price: 200, desc: 'èŒ¶è¯­ç²¾é€‰', icon: 'ğŸ«' },
    { id: 'M33', category: 'å¥¶ç›–ç³»åˆ—', name: 'ç‰›æ²¹æœé…¸å¥¶å›', price: 220, desc: 'èŒ¶è¯­ç²¾é€‰', icon: 'ğŸ¥‘' },
    { id: 'M34', category: 'å¥¶ç›–ç³»åˆ—', name: 'èŠ’æœèŒ‰è‰å†°å¥¶', price: 200, desc: 'èŒ¶è¯­ç²¾é€‰', icon: 'ğŸ¥­' },
    { id: 'M35', category: 'å¥¶ç›–ç³»åˆ—', name: 'é’æèŒ‰è‰å†°å¥¶', price: 220, desc: 'èŒ¶è¯­ç²¾é€‰', icon: 'ğŸ‡' },

    // --- å°åƒç³»åˆ— (S) ---
    { id: 'S01', category: 'å°åƒç³»åˆ—', name: 'å¥¥å°”è‰¯é¸¡ç¿…', price: 120, desc: 'é¦™å«©å…¥å‘³', icon: 'ğŸ—' },
    { id: 'S02', category: 'å°åƒç³»åˆ—', name: 'é¦™é…¥é¸¡æ’', price: 140, desc: 'å¤–é…¥é‡Œå«©', icon: 'ğŸ¥©' },
    { id: 'S03', category: 'å°åƒç³»åˆ—', name: 'é¦™è¾£é¸¡ç¿…æ ¹', price: 150, desc: 'çƒ­è¾£è¿‡ç˜¾', icon: 'ğŸ—' },
    { id: 'S04', category: 'å°åƒç³»åˆ—', name: 'å°æ¹¾çƒ¤è‚ ', price: 60, desc: 'åœ°é“é£å‘³', icon: 'ğŸŒ­' },
    { id: 'S05', category: 'å°åƒç³»åˆ—', name: 'é»‘é¦™é¸¡æŸ³', price: 60, desc: 'ä¼‘é—²å¿…å¤‡', icon: 'ğŸŸ' },
    { id: 'S06', category: 'å°åƒç³»åˆ—', name: 'éª¨è‚‰ç›¸è¿', price: 60, desc: 'ç»å…¸ä¸²ä¸²', icon: 'ğŸ¢' },
    { id: 'S07', category: 'å°åƒç³»åˆ—', name: 'éº¦ä¹é¸¡ç±³èŠ±', price: 120, desc: 'ä¸€å£ä¸€ä¸ª', icon: ' ğŸ—' },
    { id: 'S08', category: 'å°åƒç³»åˆ—', name: 'é£å‘³è–¯æ¡', price: 120, desc: 'å¤§ä»½é…¥è„†', icon: 'ğŸŸ' },
    { id: 'S10', category: 'å°åƒç³»åˆ—', name: 'å¢¨é±¼ä¸¸', price: 140, desc: 'Qå¼¹é²œé¦™', icon: 'ğŸ¡' },
    { id: 'S11', category: 'å°åƒç³»åˆ—', name: 'å¥¥å°”è‰¯è…¿æ’', price: 120, desc: 'æ•´å—è…¿è‚‰', icon: 'ğŸ—' },
    { id: 'S12', category: 'å°åƒç³»åˆ—', name: 'å°åƒæ‹¼ç›˜(1)', price: 500, desc: 'è¶…å€¼ç»„åˆ', icon: 'ğŸ±' },
    { id: 'S13', category: 'å°åƒç³»åˆ—', name: 'é»„é‡‘åœ°ç“œæ¡', price: 150, desc: 'é¦™ç”œå¯å£', icon: 'ğŸ ' },
    { id: 'S14', category: 'å°åƒç³»åˆ—', name: 'é›ªèŠ±é¸¡æŸ³', price: 150, desc: 'ç»å…¸ç¾å‘³', icon: 'ğŸŸ' },
    { id: 'S15', category: 'å°åƒç³»åˆ—', name: 'é»‘æ¤’é¸¡å—', price: 140, desc: 'ç»å…¸é»‘æ¤’', icon: 'ğŸ—' },
    { id: 'S16', category: 'å°åƒç³»åˆ—', name: 'é¸¡ç¿…åŒ…é¥­', price: 200, desc: 'ç‰¹è‰²æ¨è', icon: 'ğŸ—' },
    { id: 'S17', category: 'å°åƒç³»åˆ—', name: 'é¦™èŠ‹åœ°ç“œä¸¸(6ä¸ª)', price: 150, desc: 'ç”œå¿ƒå°é£Ÿ', icon: 'ğŸ¡' },
    { id: 'S19', category: 'å°åƒç³»åˆ—', name: 'å¥¥å°”è‰¯å…¨é¸¡', price: 500, desc: 'å…¨å®¶å…±äº«', icon: 'ğŸ—' },
    { id: 'S20', category: 'å°åƒç³»åˆ—', name: 'å¥¥å°”è‰¯æ‰‹æªé¸¡è…¿', price: 200, desc: 'å¤§æ»¡è¶³', icon: 'ğŸ—' },
    { id: 'S21', category: 'å°åƒç³»åˆ—', name: 'é…¥ç‚¸æé²è‡', price: 200, desc: 'èŒé¦™é…¥è„†', icon: 'ğŸ„' },
    { id: 'S27', category: 'å°åƒç³»åˆ—', name: 'çˆ†æµ†é¸¡æ’', price: 220, desc: 'å°å¿ƒçƒ«å£', icon: 'ğŸ¥©' },
    { id: 'S28', category: 'å°åƒç³»åˆ—', name: 'æ‰‹æ’•çŒªæ‰’', price: 180, desc: 'è‚‰è´¨ç´§å®', icon: 'ğŸ¥©' },
    { id: 'S29', category: 'å°åƒç³»åˆ—', name: 'é¦™è¾£çŒªè¹„', price: 240, desc: 'æ»¡æ»¡èƒ¶åŸ', icon: 'ğŸ–' },
    { id: 'S30', category: 'å°åƒç³»åˆ—', name: 'ä¸‰è‰²èŠ‹æ³¥å·(5ä¸ª)', price: 200, desc: 'è½¯ç³¯é¦™ç”œ', icon: 'ğŸ®' },
    { id: 'S33', category: 'å°åƒç³»åˆ—', name: 'é‡‘é»„å°é…¥è‚‰', price: 150, desc: 'é…¥è„†çˆ½å£', icon: 'ğŸŸ' },
    { id: 'S36', category: 'å°åƒç³»åˆ—', name: 'éŸ©å¼ç‚¸é¸¡(ç”œè¾£)', price: 300, desc: 'ç»å…¸éŸ©æµ', icon: 'ğŸ—' },
    { id: 'S37', category: 'å°åƒç³»åˆ—', name: 'éŸ©å¼ç‚¸é¸¡(å’¸è›‹é»„)', price: 300, desc: 'å’¸é¦™è¯±äºº', icon: 'ğŸ—' },
    { id: 'S42', category: 'å°åƒç³»åˆ—', name: 'éŸ©å¼ç‚¸é¸¡(èœ‚èœœèŠ¥æœ«)', price: 300, desc: 'æ¸…ç”œä¸è…»', icon: 'ğŸ—' },
    { id: 'S44', category: 'å°åƒç³»åˆ—', name: 'ç§˜åˆ¶è„†çš®ç‚¸å…¨é¸¡', price: 600, desc: 'æ‹›ç‰Œæ¨è', icon: 'ğŸ—' },
    { id: 'S50', category: 'å°åƒç³»åˆ—', name: 'ç–ç„–ç¾Šæ’', price: 1000, desc: 'ç¡¬æ ¸å•å“', icon: 'ğŸ–' },
    { id: 'S55', category: 'å°åƒç³»åˆ—', name: 'ä¸€åªè„†çš®é¸­', price: 1000, desc: 'è±ªåæ¨è', icon: 'ğŸ¦†' },
    { id: 'S56', category: 'å°åƒç³»åˆ—', name: 'é¦™è¾£ç‰›ä»”éª¨', price: 780, desc: 'è‚‰é¦™å››æº¢', icon: 'ğŸ¥©' },
    { id: 'S81', category: 'å°åƒç³»åˆ—', name: 'ç§˜åˆ¶éº»è¾£å‡‰æ‹Œé¸¡çˆª', price: 380, desc: 'è¿½å‰§ç¥å™¨', icon: 'ğŸ¾' },
    { id: 'S82', category: 'å°åƒç³»åˆ—', name: 'éº»è¾£å­œç„¶åœŸè±†', price: 280, desc: 'åœ°é“é£å‘³', icon: 'ğŸ¥”' },
    { id: 'S83', category: 'å°åƒç³»åˆ—', name: 'è„†çš®æ·€ç²‰è‚ ', price: 120, desc: 'è¡—å¤´å›å¿†', icon: 'ğŸŒ­' },
    // --- è¡¥å…¨ï¼šæ¼æ‰çš„å°åƒ (Sç³»åˆ—) ---
    { id: 'S22', category: 'å°åƒç³»åˆ—', name: 'å°åƒæ‹¼ç›˜(2)', price: 500, desc: 'èšä¼šé¦–é€‰', icon: 'ğŸ±' },
    { id: 'S23', category: 'å°åƒç³»åˆ—', name: 'å°åƒæ‹¼ç›˜(3)', price: 500, desc: 'åˆ†é‡åè¶³', icon: 'ğŸ±' },
    { id: 'S34', category: 'å°åƒç³»åˆ—', name: 'å°åƒæ‹¼ç›˜(4)', price: 320, desc: 'ç²¾é€‰ç»„åˆ', icon: 'ğŸ±' },
    { id: 'S38', category: 'å°åƒç³»åˆ—', name: 'éŸ©å¼ç‚¸é¸¡(é…¸è¾£å‘³)', price: 300, desc: 'å¼€èƒƒè¿‡ç˜¾', icon: 'ğŸ—' },
    { id: 'S39', category: 'å°åƒç³»åˆ—', name: 'éŸ©å¼ç‚¸é¸¡(åŸå‘³)', price: 300, desc: 'ç»å…¸æœ¬å‘³', icon: 'ğŸ—' },
    { id: 'S40', category: 'å°åƒç³»åˆ—', name: 'éŸ©å¼ç‚¸é¸¡(é…±æ²¹è’œé¦™)', price: 300, desc: 'è’œé¦™è¯±äºº', icon: 'ğŸ—' },
    { id: 'S41', category: 'å°åƒç³»åˆ—', name: 'éŸ©å¼ç‚¸é¸¡(è¾£å‘³)', price: 300, desc: 'ç«è¾£å£æ„Ÿ', icon: 'ğŸ—' },
    { id: 'S43', category: 'å°åƒç³»åˆ—', name: 'ç§˜åˆ¶è—¤æ¤’é¸¡è…¿', price: 300, desc: 'éº»è¾£é²œé¦™', icon: 'ğŸ—' },
    { id: 'S46', category: 'å°åƒç³»åˆ—', name: 'è„†çš®ç‚¸é¸¡ä¸­ç¿…(ä¸€å¯¹)', price: 150, desc: 'é‡‘é»„é…¥è„†', icon: 'ğŸ—' },
    { id: 'S47', category: 'å°åƒç³»åˆ—', name: 'è„†çš®ç‚¸é¸¡è…¿', price: 220, desc: 'å¤§å£åƒè‚‰', icon: 'ğŸ—' },
    { id: 'S48', category: 'å°åƒç³»åˆ—', name: 'é¦™è‡è´¡ä¸¸(ä¸¤ä¸²)', price: 150, desc: 'Qå¼¹å…¥å‘³', icon: 'ğŸ¢' },
    { id: 'S49', category: 'å°åƒç³»åˆ—', name: 'èµ›è¥¿æ–½é¸¡æ’', price: 220, desc: 'æ‹›ç‰Œæ¨è', icon: 'ğŸ¥©' },
    { id: 'S51', category: 'å°åƒç³»åˆ—', name: 'è„†çš®ç‚¸å¹´ç³•(2æ ¹)', price: 150, desc: 'è½¯ç³¯æ‹‰ä¸', icon: 'ğŸ¢' },
    { id: 'S53', category: 'å°åƒç³»åˆ—', name: 'çˆ†ç‚¸å¤§é±¿é±¼', price: 220, desc: 'æ•´åªè±ªæ¨ª', icon: 'ğŸ¦‘' },
    { id: 'S59', category: 'å°åƒç³»åˆ—', name: 'è’œé¦™å°æ’éª¨', price: 480, desc: 'è’œé¦™å…¥éª¨', icon: 'ğŸ¥©' },
    { id: 'S60', category: 'å°åƒç³»åˆ—', name: 'è„†çš®ç‚¸é¦™è•‰(5ä¸ª)', price: 220, desc: 'å¤–é…¥é‡Œç”œ', icon: 'ğŸŒ' },
    { id: 'S68', category: 'å°åƒç³»åˆ—', name: 'å¤©å¦‡ç½—é²œè™¾æ£’', price: 200, desc: 'é²œç¾è™¾è‚‰', icon: 'ğŸ¤' },
    { id: 'S74', category: 'å°åƒç³»åˆ—', name: 'éœ¸æ°”å¤é¦™æ‰‹æªè…¿', price: 320, desc: 'å¤é¦™æµ“éƒ', icon: 'ğŸ—' },
    { id: 'S77', category: 'å°åƒç³»åˆ—', name: 'çˆ†æ±ç‰›ç­‹ä¸¸(6ä¸ª)', price: 200, desc: 'å¼¹åŠ›åè¶³', icon: 'ğŸ¡' },
    { id: 'S78', category: 'å°åƒç³»åˆ—', name: 'èŒ¶è¯­é‡‘æ’éª¨', price: 680, desc: 'ç‹¬å®¶ç§˜åˆ¶', icon: 'ğŸ¥©' },
    { id: 'S79', category: 'å°åƒç³»åˆ—', name: 'è„†ç‚¸é‡‘é’ˆè‡', price: 200, desc: 'å’”åš“è„†å“', icon: 'ğŸ„' },

    // --- åº—é•¿æ¨è (N) ---
    { id: 'N01', category: 'åº—é•¿æ¨è', name: 'çç å¥¶èŒ¶', price: 130, desc: 'ç»å…¸NO.1', icon: 'ğŸ§‹' },
    { id: 'N02', category: 'åº—é•¿æ¨è', name: 'æ¤°æœå¥¶èŒ¶', price: 130, desc: 'Qå¼¹æ¤°æœ', icon: 'ğŸ§‹' },
    { id: 'N03', category: 'åº—é•¿æ¨è', name: 'èŠ‹åœ†å¥¶èŒ¶', price: 150, desc: 'æ‰‹ä½œèŠ‹åœ†', icon: 'ğŸ§‹' },
    { id: 'N09', category: 'åº—é•¿æ¨è', name: 'ç†ŠçŒ«å¥¶èŒ¶', price: 150, desc: 'äººæ°”æ¨è', icon: 'ğŸ¼' },
    { id: 'N10', category: 'åº—é•¿æ¨è', name: 'å¥¶èŒ¶ä¸‰å…„å¼Ÿ', price: 150, desc: 'æ–™å¤šè¶…æ»¡è¶³', icon: 'ğŸ§‹' },
    { id: 'N20', category: 'åº—é•¿æ¨è', name: 'éœ¸æ°”çç å¥¶èŒ¶(6L)', price: 1200, desc: 'èšä¼šç¥å™¨', icon: 'ğŸº' },
    { id: 'N23', category: 'åº—é•¿æ¨è', name: 'èŠ‹æ³¥å•µå•µå¥¶èŒ¶', price: 180, desc: 'æ‰‹æ£èŠ‹æ³¥', icon: 'ğŸ§‹' },
    { id: 'N29', category: 'åº—é•¿æ¨è', name: 'éœ¸æ°”é‡‘æ¡”æŸ æª¬(6L)', price: 1800, desc: 'å·¨æ— éœ¸æ¡¶', icon: 'ğŸº' },
    { id: 'N31', category: 'åº—é•¿æ¨è', name: 'éœ¸æ°”è¥¿ç“œæ±(6L)', price: 1800, desc: 'æ´¾å¯¹ç‹‚æ¬¢', icon: 'ğŸº' },
    // --- è¡¥å…¨ï¼šæ¼æ‰çš„åº—é•¿æ¨è/å¥¶èŒ¶ (Nç³»åˆ—) ---
    { id: 'N04', category: 'åº—é•¿æ¨è', name: 'è¡€ç³¯ç±³å¥¶èŒ¶', price: 150, desc: 'è½¯ç³¯è¥å…»', icon: 'ğŸ§‹' },
    { id: 'N05', category: 'åº—é•¿æ¨è', name: 'ç‡•éº¦å¥¶èŒ¶', price: 150, desc: 'è°·ç‰©é¦™æ°”', icon: 'ğŸ§‹' },
    { id: 'N06', category: 'åº—é•¿æ¨è', name: 'å¸ƒä¸å¥¶èŒ¶', price: 130, desc: 'æ»‘å«©å¸ƒä¸', icon: 'ğŸ§‹' },
    { id: 'N07', category: 'åº—é•¿æ¨è', name: 'ä»™è‰å¥¶èŒ¶', price: 130, desc: 'æ¸…å‡‰ä»™è‰', icon: 'ğŸ§‹' },
    { id: 'N08', category: 'åº—é•¿æ¨è', name: 'çº¢è±†å¥¶èŒ¶', price: 130, desc: 'ç›¸æ€çº¢è±†', icon: 'ğŸ§‹' },
    { id: 'N11', category: 'åº—é•¿æ¨è', name: 'æŠ¹èŒ¶çº¢è±†', price: 150, desc: 'å’Œé£ç‰©è¯­', icon: 'ğŸµ' },
    { id: 'N12', category: 'åº—é•¿æ¨è', name: 'å¯å¯å¥¶èŒ¶', price: 150, desc: 'æµ“éƒä¸æ»‘', icon: 'ğŸ«' },
    { id: 'N16', category: 'åº—é•¿æ¨è', name: 'èŠ’æœæ¬§è•¾', price: 150, desc: 'é²œæœä¸å¥¶', icon: 'ğŸ¥­' },
    { id: 'N17', category: 'åº—é•¿æ¨è', name: 'è“è“æ¬§è•¾', price: 150, desc: 'æµ“éƒè“è“', icon: 'ğŸ¥›' },
    { id: 'N18', category: 'åº—é•¿æ¨è', name: 'è‰è“æ¬§è•¾', price: 150, desc: 'å°‘å¥³å¿ƒåŠ¨', icon: 'ğŸ“' },
    { id: 'N19', category: 'åº—é•¿æ¨è', name: 'èŒ‰é¦™å¥¶ç»¿', price: 150, desc: 'æ¸…æ–°æ€¡äºº', icon: 'ğŸƒ' },
    { id: 'N22', category: 'åº—é•¿æ¨è', name: 'åŸå‘³å¥¶èŒ¶', price: 110, desc: 'å…¥é—¨é¦–é€‰', icon: 'ğŸ§‹' },
    { id: 'N28', category: 'åº—é•¿æ¨è', name: 'å¯å¯å†°é²œå¥¶', price: 200, desc: 'é†‡åšå¯å¯', icon: 'ğŸ¥›' },
    { id: 'N30', category: 'åº—é•¿æ¨è', name: 'éœ¸æ°”æ»¡æ¯ç™¾é¦™æœ(6L)', price: 1800, desc: 'å·¨æ— éœ¸æ¡¶', icon: 'ğŸº' },

    // --- æœèŒ¶ç³»åˆ— (F) ---
    { id: 'F04', category: 'æœèŒ¶ç³»åˆ—', name: 'é‡‘æ¡”æŸ æª¬', price: 150, desc: 'é…¸ç”œå¼€èƒƒ', icon: 'ğŸ‹' },
    { id: 'F05', category: 'æœèŒ¶ç³»åˆ—', name: 'æ»¡æ¯ç™¾é¦™æœ', price: 150, desc: 'ç»´Cæ»¡æ»¡', icon: 'ğŸ¹' },
    { id: 'F07', category: 'æœèŒ¶ç³»åˆ—', name: 'è¶…çº§æ°´æœèŒ¶', price: 180, desc: 'æ»¡æ¯æ°´æœ', icon: 'ğŸ¹' },
    { id: 'F09', category: 'æœèŒ¶ç³»åˆ—', name: 'æ¨æç”˜éœ²', price: 200, desc: 'æ¸¯å¼ç»å…¸', icon: 'ğŸ¥­' },
    { id: 'F20', category: 'æœèŒ¶ç³»åˆ—', name: 'æ‰‹æ‰“è‰è“å†°æŸ èŒ¶', price: 200, desc: 'æ¸…çˆ½çˆ†æ¬¾', icon: 'ğŸ“' },
    { id: 'F28', category: 'æœèŒ¶ç³»åˆ—', name: 'æ»¡æ¯æ°´æœæ¡¶', price: 240, desc: '1000mlå¤§å®¹é‡', icon: 'ğŸª£' },
    { id: 'F39', category: 'æœèŒ¶ç³»åˆ—', name: 'æ‰‹æ‰“é¸­å±é¦™æŸ æª¬èŒ¶', price: 180, desc: 'çˆ†çˆ½è§£è…»', icon: 'ğŸ‹' },
    { id: 'F46', category: 'æœèŒ¶ç³»åˆ—', name: 'ä¸€æ¡¶çˆ†æœ‰æ–™å¥¶èŒ¶', price: 240, desc: 'æ–™å¤šå–åˆ°é¥±', icon: 'ğŸª£' },
    // --- è¡¥å…¨ï¼šæ¼æ‰çš„æœèŒ¶/ç‰¹è°ƒ (Fç³»åˆ—) ---
    { id: 'F01', category: 'æœèŒ¶ç³»åˆ—', name: 'æ–°é²œæ¤°æ±', price: 130, desc: 'æ¸…ç”œç”˜éœ²', icon: 'ğŸ¥¥' },
    { id: 'F11', category: 'æœèŒ¶ç³»åˆ—', name: 'è“è“å•µå•µèŒ¶', price: 180, desc: 'æœé¦™æµ“éƒ', icon: 'ğŸ¥¤' },
    { id: 'F12', category: 'æœèŒ¶ç³»åˆ—', name: 'æŸ æª¬é…¸å¥¶èŒ', price: 180, desc: 'åŠ©æ¶ˆåŒ–', icon: 'ğŸ¥¤' },
    { id: 'F15', category: 'æœèŒ¶ç³»åˆ—', name: 'å“ˆå¯†ç“œæŸ æª¬èŒ¶', price: 180, desc: 'æ¸…æ–°å¤æ—¥', icon: 'ğŸˆ' },
    { id: 'F16', category: 'æœèŒ¶ç³»åˆ—', name: 'ç™¾é¦™æœåŒå“ç‚®', price: 180, desc: 'çç +æ¤°æœ', icon: 'ğŸ¹' },
    { id: 'F18', category: 'æœèŒ¶ç³»åˆ—', name: 'å‡¤æ¢¨ä¹³é…¸èŒ', price: 180, desc: 'é…¸ç”œå¹³è¡¡', icon: 'ğŸ' },
    { id: 'F21', category: 'æœèŒ¶ç³»åˆ—', name: 'æŠ¹èŒ¶è‰è“åœ£è¯å¥¶', price: 220, desc: 'é«˜é¢œå€¼', icon: 'ğŸ„' },
    { id: 'F23', category: 'æœèŒ¶ç³»åˆ—', name: 'æš´æ‰“æ©™æŸ ç»¿', price: 200, desc: 'æ»¡å£æœé¦™', icon: 'ğŸŠ' },
    { id: 'F27', category: 'æœèŒ¶ç³»åˆ—', name: 'è¥¿ç“œå•µå•µèŒ‰è‰èŒ¶', price: 180, desc: 'è§£æš‘å¿…å¤‡', icon: 'ğŸ‰' },
    { id: 'F31', category: 'æœèŒ¶ç³»åˆ—', name: 'è èé…’é…¿æ¡‚èŠ±é¥®', price: 200, desc: 'å›½é£ç‰¹è°ƒ', icon: 'ğŸŒ¼' },
    { id: 'F37', category: 'æœèŒ¶ç³»åˆ—', name: 'ç«é¾™æœæ°”æ³¡å…»ä¹å¤š', price: 180, desc: 'é¢œå€¼çˆ†è¡¨', icon: 'ğŸ¹' },
    { id: 'F40', category: 'æœèŒ¶ç³»åˆ—', name: 'èŒ¶è¯­é²œç‰›ä¹³èŒ¶', price: 200, desc: 'çº¯é²œç‰›å¥¶', icon: 'ğŸ¥›' },
    { id: 'F42', category: 'æœèŒ¶ç³»åˆ—', name: 'é’æå†°èŒ‰è‰', price: 180, desc: 'æ·¡é›…è„±ä¿—', icon: 'ğŸ‡' },
    { id: 'F50', category: 'æœèŒ¶ç³»åˆ—', name: 'è¥¿ç“œå•µå•µæ¤°', price: 200, desc: 'å¤æ—¥ç»é…', icon: 'ğŸ¥¥' },

    // --- é²œæ¦¨æœæ± (H) ---
    { id: 'H01', category: 'é²œæ¦¨æœæ±', name: 'é²œæ¦¨è¥¿ç“œæ±', price: 130, desc: 'æ¸…ç”œè§£æš‘', icon: 'ğŸ‰' },
    { id: 'H02', category: 'é²œæ¦¨æœæ±', name: 'èŠ’æœå†°æ²™', price: 150, desc: 'ç»†è…»å†°çˆ½', icon: 'ğŸ¥­' },
    { id: 'H04', category: 'é²œæ¦¨æœæ±', name: 'ç‰›æ²¹æœå•µå•µå†°', price: 200, desc: 'ç»µå¯†ä¸æ»‘', icon: 'ğŸ¥‘' },
    { id: 'H10', category: 'é²œæ¦¨æœæ±', name: 'é²œæ¦¨æ©™æ±', price: 160, desc: 'ç°ç‚¹ç°æ¦¨', icon: 'ğŸŠ' },
    { id: 'H27', category: 'é²œæ¦¨æœæ±', name: 'èŠ’æœé…¸å¥¶éœ²', price: 200, desc: 'é¦™ç”œæµ“éƒ', icon: 'ğŸ¥­' },
    { id: 'H29', category: 'é²œæ¦¨æœæ±', name: 'é²œæ¦¨ç«é¾™æœæ±', price: 220, desc: 'é€šç•…å¥åº·', icon: 'ğŸŒµ' }, // è¿™é‡ŒåŸæœ¬å¤šäº†ä¸€ä¸ª ]; æˆ‘å¸®ä½ åˆ äº†ï¼Œæ¢æˆäº†é€—å·
    // --- è¡¥å…¨ï¼šæ¼æ‰çš„é²œæ¦¨/å¥¶æ˜” (Hç³»åˆ—) ---
    { id: 'H03', category: 'é²œæ¦¨æœæ±', name: 'å“ˆå¯†ç“œå¥¶æ˜”', price: 150, desc: 'é†‡åšæœé¦™', icon: 'ğŸˆ' },
    { id: 'H05', category: 'é²œæ¦¨æœæ±', name: 'æœ¨ç“œå¥¶æ˜”', price: 150, desc: 'æ»‹è¡¥ç¾é¢œ', icon: 'ğŸ¥¤' },
    { id: 'H06', category: 'é²œæ¦¨æœæ±', name: 'é¦™è•‰å¥¶æ˜”', price: 150, desc: 'æµ“éƒèƒ½é‡', icon: 'ğŸŒ' },
    { id: 'H07', category: 'é²œæ¦¨æœæ±', name: 'è‰è“å†°æ²™', price: 150, desc: 'ç²‰è‰²å›å¿†', icon: 'ğŸ“' },
    { id: 'H08', category: 'é²œæ¦¨æœæ±', name: 'èŠ’æœç‰›å¥¶', price: 160, desc: 'ç»å…¸ç»„åˆ', icon: 'ğŸ¥­' },
    { id: 'H13', category: 'é²œæ¦¨æœæ±', name: 'èŠ’æœç™¾é¦™æ‹', price: 180, desc: 'çƒ­å¸¦é£æƒ…', icon: 'ğŸ¥­' },
    { id: 'H16', category: 'é²œæ¦¨æœæ±', name: 'å“ˆå¯†ç“œé¦™è•‰å¥¶æ˜”', price: 180, desc: 'ä¸æ»‘å£æ„Ÿ', icon: 'ğŸ¥›' },
    { id: 'H17', category: 'é²œæ¦¨æœæ±', name: 'èŠèŠèŠ’æœ', price: 180, desc: 'å¥¶ç›–èŠ’æœ', icon: 'ğŸ¥­' },
    { id: 'H21', category: 'é²œæ¦¨æœæ±', name: 'èŠèŠè¥¿ç“œ', price: 180, desc: 'å’¸ç”œçˆ½å£', icon: 'ğŸ‰' },
    { id: 'H25', category: 'é²œæ¦¨æœæ±', name: 'ç´«ç±³é…¸å¥¶éœ²', price: 190, desc: 'åš¼åŠ²åè¶³', icon: 'ğŸ¥£' },
    { id: 'H26', category: 'é²œæ¦¨æœæ±', name: 'ç‡•éº¦é…¸å¥¶éœ²', price: 190, desc: 'ä½è„‚å¥åº·', icon: 'ğŸ¥›' },
    { id: 'H28', category: 'é²œæ¦¨æœæ±', name: 'æ»¡æ¯æ¡‚èŠ±é…’é…¿é…¸å¥¶', price: 200, desc: 'ç‹¬ç‰¹é£å‘³', icon: 'ğŸ¥£' },
    { id: 'H30', category: 'é²œæ¦¨æœæ±', name: 'é»‘ç³–çç ç¢ç¢å†°', price: 200, desc: 'å†°çˆ½ä¸€å¤', icon: 'ğŸ§Š' }
]; // è¿™ä¸ªæ‰æ˜¯çœŸæ­£çš„æ•°ç»„ç»“å°¾ï¼
        // ====== PATCH 1: å…¨å±€çŠ¶æ€ï¼ˆå¿…é¡»æœ‰ï¼‰======
let cart = [];
let currentItem = null;

const CART_KEY = 'tiktalk_cart_v1';
try {
  const saved = JSON.parse(localStorage.getItem(CART_KEY) || '[]');
  if (Array.isArray(saved)) cart = saved;
} catch (e) {}

function persistCart() {
  try { localStorage.setItem(CART_KEY, JSON.stringify(cart)); } catch (e) {}
}
// --- ç»ˆæé˜²å¾¡ç‰ˆåˆå§‹åŒ– ---
// ä»¥åå…¨æ–‡éƒ½ç›´æ¥ç”¨ tgï¼Œä¸è¦å†åŠ  const æˆ– let

        // --- 1. åˆ‡æ¢é¡µé¢é€»è¾‘ ---
        function switchTab(tabId) {
            // 1. å¢åŠ è¿™ä¸¤ä¸ªæ–°é¡µé¢çš„éšè—
            document.getElementById('page-home').classList.add('hidden');
            document.getElementById('page-order').classList.add('hidden');
            document.getElementById('page-cart').classList.add('hidden');
            document.getElementById('page-pickup').classList.add('hidden'); // æ–°å¢
            document.getElementById('page-me').classList.add('hidden');     // æ–°å¢
            document.getElementById('cart-preview').classList.add('hidden');

            document.querySelectorAll('nav button').forEach(btn => btn.classList.remove('active-tab'));

            document.getElementById('page-' + tabId).classList.remove('hidden');
            document.getElementById('tab-' + tabId).classList.add('active-tab');

            // ä¿æŒåŸæœ‰çš„ order å’Œ cart é€»è¾‘ä¸å˜...
            if (tabId === 'order') {
                renderOrderPage();
                if (cart.length > 0) document.getElementById('cart-preview').classList.remove('hidden');
            } else if (tabId === 'cart') {
                renderCartPage();
            }
        }

      // --- 2. æ¸²æŸ“ç‚¹å•é¡µï¼ˆå«æ•°é‡ + è”åŠ¨é«˜äº®ï¼‰---
function renderOrderPage() {
  const categories = [...new Set(menuData.map(item => item.category))];
  const catNav = document.getElementById('category-list');
  const prodCont = document.getElementById('product-container');
  if (!catNav || !prodCont) return;

  // å·¦ä¾§åˆ†ç±»
  catNav.innerHTML = categories.map((cat, idx) => `
    <div onclick="scrollToCat('${cat}')" class="p-4 text-center text-[11px] border-b cursor-pointer cat-btn ${idx===0?'category-active':''}" id="btn-${cat}">
      ${cat}
    </div>
  `).join('');

  // å³ä¾§å•†å“ï¼ˆæ¯ä¸ªå•†å“æ˜¾ç¤ºï¼š- qty +ï¼‰
  prodCont.innerHTML = categories.map(cat => `
    <div id="section-${cat}" class="mb-8 category-section">
      <h2 class="font-bold text-gray-400 text-[10px] mb-3 uppercase tracking-tighter">${cat}</h2>
      <div class="space-y-4">
        ${menuData.filter(item => item.category === cat).map(item => {
          const qty = getQtyByProductId(item.id); // æ€»æ•°é‡ï¼ˆåŒå•†å“ä¸åŒè§„æ ¼ä¹Ÿç´¯è®¡ï¼‰
          const showMinus = qty > 0;

          return `
            <div class="flex items-center gap-3 bg-white p-3 rounded-xl shadow-sm border border-gray-100">
              <div class="w-14 h-14 bg-gray-50 rounded flex items-center justify-center text-2xl shrink-0">${item.icon}</div>

              <div class="flex-1 min-w-0">
                <h3 class="font-bold text-xs truncate">${item.id} | ${item.name}</h3>
                <p class="text-orange-500 font-bold text-sm">â‚± ${item.price}</p>
              </div>

              <div class="flex items-center gap-2">
                ${showMinus ? `<button onclick="orderMinus('${item.id}')" class="w-8 h-8 rounded-full border font-bold">-</button>` : `<span class="w-8"></span>`}
                <span class="w-6 text-center font-bold">${qty}</span>
                <button onclick="handleAddClick('${item.id}')" class="bg-yellow-400 w-8 h-8 rounded-full font-bold active:scale-90 shadow-sm">+</button>
              </div>
            </div>
          `;
        }).join('')}
      </div>
    </div>
  `).join('');

  // å³ä¾§æ»šåŠ¨è”åŠ¨å·¦ä¾§é«˜äº®
  prodCont.onscroll = () => {
    let currentCat = '';
    document.querySelectorAll('.category-section').forEach(section => {
      const sectionTop = section.offsetTop - prodCont.offsetTop;
      if (prodCont.scrollTop >= sectionTop - 50) {
        currentCat = section.id.replace('section-', '');
      }
    });

    if (currentCat) {
      document.querySelectorAll('.cat-btn').forEach(b => b.classList.remove('category-active'));
      const targetBtn = document.getElementById('btn-' + currentCat);
      if (targetBtn) targetBtn.classList.add('category-active');
    }
  };
}

// --- 3. æ»šåŠ¨å‡½æ•° (ç‚¹å·¦è¾¹ï¼Œå³è¾¹åŠ¨) ---
function scrollToCat(catName) {
  const prodCont = document.getElementById('product-container');
  const element = document.getElementById('section-' + catName);
  if (!prodCont || !element) return;

  const savedHandler = prodCont.onscroll;
  prodCont.onscroll = null;

  element.scrollIntoView({ behavior: 'smooth' });

  document.querySelectorAll('.cat-btn').forEach(b => b.classList.remove('category-active'));
  const activeBtn = document.getElementById('btn-' + catName);
  if (activeBtn) activeBtn.classList.add('category-active');

  setTimeout(() => { prodCont.onscroll = savedHandler; }, 800);
}
        // --- 4. è´­ç‰©è½¦é€»è¾‘ ---
        function addToCart(id) {
  const product = menuData.find(item => item.id === id);
  if (!product) return;
  cart.push({ ...product, cartId: `${product.id}_${Date.now()}` });
  persistCart();
}
        
        function makeCartKey(id, specs) {
  return `${id}|${(specs || '').trim()}`;
}

function cartInc(item, specs = '') {
  const key = makeCartKey(item.id, specs);
  const line = cart.find(x => x.key === key);

  if (line) {
    line.qty += 1;
  } else {
    cart.push({
      key,
      id: item.id,
      name: item.name,
      price: Number(item.price || 0),
      specs: specs || '',
      qty: 1
    });
  }

  persistCart();
  updateCartUI();
}

function cartDecByProductId(id) {
  // ç‚¹å•é¡µçš„å‡å·ï¼šæŒ‰â€œæœ€åæ·»åŠ çš„é‚£æ¡è§„æ ¼è¡Œâ€å‡ 1ï¼ˆé¿å…ä½ åœ¨ç‚¹å•é¡µè¿˜è¦é€‰æ‹©è§„æ ¼ï¼‰
  for (let i = cart.length - 1; i >= 0; i--) {
    if (cart[i].id === id) {
      cart[i].qty -= 1;
      if (cart[i].qty <= 0) cart.splice(i, 1);
      persistCart();
      updateCartUI();
      return;
    }
  }
}

function cartIncByProductIdIfNoSpecs(item) {
  // å°åƒï¼šæ— è§„æ ¼ï¼Œç›´æ¥åŠ 
  cartInc(item, '');
}

function getQtyByProductId(id) {
  return cart.reduce((sum, x) => sum + (x.id === id ? x.qty : 0), 0);
}
        function updateCartUI() {
  const count = cart.reduce((sum, x) => sum + Number(x.qty || 0), 0);
  const total = cart.reduce((sum, x) => sum + Number(x.qty || 0) * Number(x.price || 0), 0);

  document.getElementById('cart-count').innerText = count;
  document.getElementById('cart-total').innerText = total;

  if (count > 0) document.getElementById('cart-preview').classList.remove('hidden');
  else document.getElementById('cart-preview').classList.add('hidden');
}
        // ====== Cart Page + line inc/dec (å¿…é¡»æ˜¯å…¨å±€å‡½æ•°) ======
function renderCartPage() {
  const listCont = document.getElementById('cart-items-list');
  if (!listCont) return;

  if (!cart || cart.length === 0) {
    listCont.innerHTML = `<p class="text-gray-400 text-center py-20">æ¸…å•æ˜¯ç©ºçš„</p>`;
    return;
  }

  const total = cart.reduce((sum, x) => sum + Number(x.qty || 0) * Number(x.price || 0), 0);

  listCont.innerHTML = cart.map((line, index) => {
    const lineTotal = Number(line.qty || 0) * Number(line.price || 0);

    return `
      <div class="bg-white p-4 rounded-xl mb-2 border border-gray-50">
        <div class="flex justify-between items-start gap-3">
          <div class="flex-1">
            <div class="font-bold text-gray-800 text-sm">${line.name}</div>
            <div class="text-[10px] text-orange-400 font-bold mt-0.5">${line.specs || ''}</div>
            <div class="text-[10px] text-gray-400 mt-1">å•ä»·ï¼šâ‚± ${line.price}</div>
          </div>

          <div class="text-right">
            <div class="text-orange-500 font-bold text-sm">å°è®¡ï¼šâ‚± ${lineTotal}</div>
            <div class="flex items-center gap-2 mt-2 justify-end">
              <button onclick="cartLineDec(${index})" class="w-7 h-7 rounded-full border font-bold">-</button>
              <span class="w-6 text-center font-bold">${line.qty}</span>
              <button onclick="cartLineInc(${index})" class="w-7 h-7 rounded-full bg-yellow-400 font-bold">+</button>
            </div>
          </div>
        </div>
      </div>
    `;
  }).join('') + `
    <div class="mt-10 p-5 bg-yellow-50 rounded-2xl border-2 border-dashed border-yellow-200">
      <div class="flex justify-between mb-4 font-bold text-lg"><span>åˆè®¡é‡‘é¢:</span><span>â‚± ${total}</span></div>
      <button onclick="submitOrder()" class="w-full bg-gray-900 text-white py-4 rounded-xl font-bold">ç«‹å³ä¸‹å•æ”¯ä»˜</button>
    </div>
  `;
}

function cartLineInc(index) {
  if (!cart[index]) return;
  cart[index].qty = Number(cart[index].qty || 0) + 1;
  persistCart();
  updateCartUI();
  renderCartPage();
  if (typeof renderOrderPage === 'function') renderOrderPage();
}

function cartLineDec(index) {
  if (!cart[index]) return;
  cart[index].qty = Number(cart[index].qty || 0) - 1;
  if (cart[index].qty <= 0) cart.splice(index, 1);
  persistCart();
  updateCartUI();
  renderCartPage();
  if (typeof renderOrderPage === 'function') renderOrderPage();
}
   <script>
  // ... ä½ ç°æœ‰ä»£ç  ...

  // ====== [æ–°å¢] è´­ç‰©è½¦é¡µæ¸²æŸ“ + è¡Œé¡¹ç›®åŠ å‡ï¼ˆè§£å†³ cartLineInc æœªå®šä¹‰ï¼‰ ======
  function renderCartPage() {
    const listCont = document.getElementById('cart-items-list');
    if (!listCont) return;

    if (!cart || cart.length === 0) {
      listCont.innerHTML = `<p class="text-gray-400 text-center py-20">æ¸…å•æ˜¯ç©ºçš„</p>`;
      return;
    }

    const total = cart.reduce((sum, x) => sum + Number(x.qty || 0) * Number(x.price || 0), 0);

    listCont.innerHTML = cart.map((line, index) => {
      const lineTotal = Number(line.qty || 0) * Number(line.price || 0);

      return `
        <div class="bg-white p-4 rounded-xl mb-2 border border-gray-50">
          <div class="flex justify-between items-start gap-3">
            <div class="flex-1">
              <div class="font-bold text-gray-800 text-sm">${line.name}</div>
              <div class="text-[10px] text-orange-400 font-bold mt-0.5">${line.specs || ''}</div>
              <div class="text-[10px] text-gray-400 mt-1">å•ä»·ï¼šâ‚± ${line.price}</div>
            </div>

            <div class="text-right">
              <div class="text-orange-500 font-bold text-sm">å°è®¡ï¼šâ‚± ${lineTotal}</div>
              <div class="flex items-center gap-2 mt-2 justify-end">
                <button onclick="cartLineDec(${index})" class="w-7 h-7 rounded-full border font-bold">-</button>
                <span class="w-6 text-center font-bold">${line.qty}</span>
                <button onclick="cartLineInc(${index})" class="w-7 h-7 rounded-full bg-yellow-400 font-bold">+</button>
              </div>
            </div>
          </div>
        </div>
      `;
    }).join('') + `
      <div class="mt-10 p-5 bg-yellow-50 rounded-2xl border-2 border-dashed border-yellow-200">
        <div class="flex justify-between mb-4 font-bold text-lg"><span>åˆè®¡é‡‘é¢:</span><span>â‚± ${total}</span></div>
        <button onclick="submitOrder()" class="w-full bg-gray-900 text-white py-4 rounded-xl font-bold">ç«‹å³ä¸‹å•æ”¯ä»˜</button>
      </div>
    `;
  }
function cartLineInc(index) {
  const line = cart[index];
  if (!line) return;
  line.qty = Number(line.qty || 0) + 1;
  persistCart();
  updateCartUI();
  renderCartPage();
  // è®©ç‚¹å•é¡µæ•°é‡ä¹ŸåŒæ­¥ï¼ˆå¯é€‰ä½†å»ºè®®ï¼‰
  if (typeof renderOrderPage === 'function') renderOrderPage();
}

function cartLineDec(index) {
  const line = cart[index];
  if (!line) return;
  line.qty = Number(line.qty || 0) - 1;

  if (line.qty <= 0) cart.splice(index, 1);

  persistCart();
  updateCartUI();
  renderCartPage();
  if (typeof renderOrderPage === 'function') renderOrderPage();
}
  function cartLineInc(index) {
    if (!cart[index]) return;
    cart[index].qty = Number(cart[index].qty || 0) + 1;
    persistCart();
    updateCartUI();
    renderCartPage();
    if (typeof renderOrderPage === 'function') renderOrderPage(); // åŒæ­¥ç‚¹å•é¡µæ•°é‡
  }

  function cartLineDec(index) {
    if (!cart[index]) return;
    cart[index].qty = Number(cart[index].qty || 0) - 1;
    if (cart[index].qty <= 0) cart.splice(index, 1);
    persistCart();
    updateCartUI();
    renderCartPage();
    if (typeof renderOrderPage === 'function') renderOrderPage(); // åŒæ­¥ç‚¹å•é¡µæ•°é‡
  }
</script> 
        // =========================
// å¹²å‡€ç‰ˆï¼šçŠ¶æ€ / é…ç½® / è¯­è¨€ / å¼¹çª— / ä¸‹å•
// ï¼ˆæ›¿æ¢æ‰ switchTab('home') åé¢é‚£ä¸€å¨é‡å¤é€»è¾‘ï¼‰
// =========================

// Telegram WebApp åˆå§‹åŒ–ï¼ˆæ™®é€šæµè§ˆå™¨ä¹Ÿèƒ½è·‘ï¼‰
const tg = (window.Telegram && window.Telegram.WebApp) ? window.Telegram.WebApp : null;
if (tg) {
    try {
        tg.ready();
        tg.expand();
    } catch (e) {
        console.warn('Telegram WebApp init warning:', e);
    }
}

// ---- é…ç½®ï¼šåç«¯æ¥å£ï¼ˆå…ˆç•™ç©ºï¼Œæ²¡åç«¯æ—¶ä¼šè‡ªåŠ¨èµ° Telegram / mockï¼‰----
const APP_CONFIG = {
    API_BASE: '', // ä¾‹å¦‚: 'http://localhost:3000/api'
    USE_BACKEND: false // åç«¯å‡†å¤‡å¥½åæ”¹æˆ true
};

// ---- å…¨å±€çŠ¶æ€ ----
let appLang = 'zh'; // ç”¨æˆ·ç«¯è¯­è¨€ï¼ˆzh / enï¼‰
// è¿™é‡Œå‡è®¾ä½ å‰é¢å·²ç»ä¿ç•™äº† let cart = [];
// è¿™é‡Œå‡è®¾ä½ å‰é¢å·²ç»ä¿ç•™äº† let currentItem = null;

// ---- æ–‡æ¡ˆå­—å…¸ï¼ˆå…ˆåšæ ¸å¿ƒæµç¨‹æ–‡æ¡ˆï¼‰----
const I18N = {
    zh: {
        pickupBtn: 'å–å•å·',
        cartEmpty: 'æ¸…å•æ˜¯ç©ºçš„',
        totalLabel: 'åˆè®¡é‡‘é¢',
        checkoutNow: 'ç«‹å³ä¸‹å•æ”¯ä»˜',
        addToList: 'åŠ å…¥æ¸…å•',
        added: 'å·²åŠ å…¥æ¸…å•',
        cartEmptyAlert: 'æ‚¨çš„æ¸…å•è¿˜æ˜¯ç©ºçš„å“¦',
        submitSuccess: 'è®¢å•å·²æäº¤',
        submitFail: 'æäº¤å¤±è´¥ï¼Œè¯·ç¨åå†è¯•',
        openInTelegram: 'è¯·åœ¨ Telegram ä¸­æ‰“å¼€æ­¤é¡µé¢',
        specSugar: 'ç”œåº¦',
        specIce: 'å†°åº¦'
    },
    en: {
        pickupBtn: 'Pickup',
        cartEmpty: 'Your cart is empty',
        totalLabel: 'Total',
        checkoutNow: 'Place Order',
        addToList: 'Add to Cart',
        added: 'Added to cart',
        cartEmptyAlert: 'Your cart is empty',
        submitSuccess: 'Order submitted',
        submitFail: 'Submit failed. Please try again.',
        openInTelegram: 'Please open this page in Telegram',
        specSugar: 'Sugar',
        specIce: 'Ice'
    }
};

function t(key) {
    return (I18N[appLang] && I18N[appLang][key]) || key;
}
function notify(msg) {
  if (tg) {
    // ä¼˜å…ˆç”¨ Telegram å¼¹çª—ï¼ˆæ›´åƒ Mini Appï¼‰
    if (typeof tg.showPopup === 'function') {
      tg.showPopup({ message: msg, buttons: [{ type: 'ok' }] });
    } else if (typeof tg.showAlert === 'function') {
      tg.showAlert(msg);
    } else {
      alert(msg);
    }
  } else {
    alert(msg);
  }
}
// ---- æœ¬åœ° menuData å…¼å®¹åŒè¯­å­—æ®µï¼ˆå…ˆåšå ä½ï¼Œåç«¯æ¥å…¥åä¼šè¦†ç›–çœŸå®è‹±æ–‡ï¼‰----
function ensureMenuBilingualFields() {
    menuData.forEach(item => {
        if (!item.name_zh) item.name_zh = item.name;
        if (!item.name_en) item.name_en = item.name; // å…ˆå ä½ï¼Œåç«¯è¿”å›çœŸå®è‹±æ–‡æ—¶ä¼šæ›¿æ¢
        if (!item.desc_zh) item.desc_zh = item.desc || '';
        if (!item.desc_en) item.desc_en = item.desc || '';
        // ä¿ç•™ category ä½œä¸ºç³»ç»Ÿå†…éƒ¨å­—æ®µï¼ˆä¸è¦éšè¯­è¨€åˆ‡æ¢æ”¹æ‰ï¼‰
        if (!item.category_zh) item.category_zh = item.category;
        if (!item.category_en) item.category_en = item.category; // åç«¯å¯è¿”å›çœŸå®è‹±æ–‡åˆ†ç±»
    });
}

// ç”¨äºä¸æ”¹ä½ ç°æœ‰ renderOrderPage() çš„æƒ…å†µä¸‹ï¼Œç›´æ¥åˆ‡æ¢æ˜¾ç¤ºåç§°
function syncMenuDisplayByLang() {
    menuData.forEach(item => {
        item.name = appLang === 'en' ? (item.name_en || item.name_zh) : (item.name_zh || item.name);
        item.desc = appLang === 'en' ? (item.desc_en || item.desc_zh) : (item.desc_zh || item.desc || '');
        // category ä¸åŠ¨ï¼ˆé¿å…æ»šåŠ¨é”šç‚¹/é€»è¾‘ç‚¸ï¼‰
    });
}

function updateLangButtonsUI() {
    const zhBtn = document.getElementById('lang-btn-zh');
    const enBtn = document.getElementById('lang-btn-en');
    if (zhBtn && enBtn) {
        if (appLang === 'zh') {
            zhBtn.className = 'px-2 py-1 text-[10px] rounded-full bg-white font-bold shadow-sm';
            enBtn.className = 'px-2 py-1 text-[10px] rounded-full text-gray-500';
        } else {
            enBtn.className = 'px-2 py-1 text-[10px] rounded-full bg-white font-bold shadow-sm';
            zhBtn.className = 'px-2 py-1 text-[10px] rounded-full text-gray-500';
        }
    }
}

function applyLanguageToStaticUI() {
    const pickupBtn = document.getElementById('pickup-btn');
    if (pickupBtn) pickupBtn.innerText = t('pickupBtn');

    // åº•éƒ¨å¯¼èˆªï¼ˆå…ˆåšåŸºç¡€é¡¹ï¼Œé¿å…å…¨éƒ¨æ”¹ä¸€é HTMLï¼‰
    const tabTexts = {
        home: appLang === 'zh' ? 'é¦–é¡µ' : 'Home',
        order: appLang === 'zh' ? 'ç‚¹å•' : 'Order',
        pickup: appLang === 'zh' ? 'å–å•' : 'Pickup',
        cart: appLang === 'zh' ? 'æ¸…å•' : 'Cart',
        me: appLang === 'zh' ? 'æˆ‘çš„' : 'Me'
    };

    Object.keys(tabTexts).forEach(tab => {
        const btn = document.getElementById(`tab-${tab}`);
        if (!btn) return;
        const spans = btn.querySelectorAll('span');
        if (spans[1]) spans[1].innerText = tabTexts[tab];
    });

    // è§„æ ¼å¼¹çª—æŒ‰é’®æ–‡æœ¬ï¼ˆåªæ”¹æ ‡é¢˜ï¼Œä¸æ”¹é€‰é¡¹å€¼æœ¬èº«ï¼Œé¿å…é€»è¾‘å¤æ‚ï¼‰
    const sugarTitle = document.querySelector('#sugar-options')?.previousElementSibling;
    const iceTitle = document.querySelector('#ice-options')?.previousElementSibling;
    if (sugarTitle) sugarTitle.innerText = t('specSugar');
    if (iceTitle) iceTitle.innerText = t('specIce');

    const addBtn = document.querySelector('#spec-modal button[onclick="confirmAddToCart()"]');
    if (addBtn) addBtn.innerText = t('addToList');
}

function rerenderCurrentPageForLanguage() {
    // åˆ‡è¯­è¨€åï¼Œé‡æ–°åˆ·æ–°åŠ¨æ€å†…å®¹
    syncMenuDisplayByLang();

    if (typeof renderOrderPage === 'function') {
        renderOrderPage();
    }
    if (typeof renderCartPage === 'function') {
        renderCartPage();
    }

    // å¦‚æœè§„æ ¼å¼¹çª—å½“å‰å¼€ç€ï¼Œæ›´æ–°å¼¹çª—å•†å“åç§°
    if (currentItem) {
        const latest = menuData.find(i => i.id === currentItem.id);
        if (latest) currentItem = latest;
        const modalName = document.getElementById('modal-name');
        if (modalName && currentItem) {
            modalName.innerText = `${currentItem.id} | ${currentItem.name}`;
        }
    }
}

function switchLang(lang) {
    if (!['zh', 'en'].includes(lang)) return;
    appLang = lang;
    localStorage.setItem('appLang', appLang);
    updateLangButtonsUI();
    applyLanguageToStaticUI();
    rerenderCurrentPageForLanguage();
}

// ---- è§„æ ¼å¼¹çª—é€»è¾‘ï¼ˆåªä¿ç•™è¿™ä¸€ç‰ˆï¼‰----
function resetSpecs() {
    const allBtns = document.querySelectorAll('#spec-modal .spec-btn');
    allBtns.forEach(btn => {
        btn.classList.remove('active', 'bg-orange-50', 'text-orange-500', 'border-orange-500');
        btn.classList.add('bg-gray-50', 'text-gray-500', 'border-transparent');
    });

    // é»˜è®¤é€‰é¡¹ï¼šå…¨ç³– / æ­£å¸¸å†°ï¼ˆå¦‚æœæŒ‰é’®å­˜åœ¨ï¼‰
    const defaults = ['å…¨ç³–', 'æ­£å¸¸å†°'];
    allBtns.forEach(btn => {
        const txt = btn.innerText.trim();
        if (defaults.some(d => txt.includes(d))) {
            btn.classList.add('active', 'bg-orange-50', 'text-orange-500', 'border-orange-500');
            btn.classList.remove('bg-gray-50', 'text-gray-500', 'border-transparent');
        }
    });
}

function openSpecs(id) {
    currentItem = menuData.find(i => i.id === id);
    if (!currentItem) return;

    resetSpecs();

    const modalName = document.getElementById('modal-name');
    const modalPrice = document.getElementById('modal-price');
    const modalIcon = document.getElementById('modal-icon');

    if (modalName) modalName.innerText = `${currentItem.id} | ${currentItem.name}`;
    if (modalPrice) modalPrice.innerText = `â‚± ${currentItem.price}`;
    if (modalIcon) modalIcon.innerText = currentItem.icon || 'ğŸ¥¤';

    document.getElementById('spec-modal').classList.remove('hidden');
}

function closeModal() {
    document.getElementById('spec-modal').classList.add('hidden');
}

function selectSpec(btn, group) {
    // æ¯ç»„ç‹¬ç«‹åˆ‡æ¢ï¼ˆæ¯å‹/ç”œåº¦/å†°åº¦å„è‡ªç‹¬ç«‹ï¼‰
    const parent = btn.parentElement;
    parent.querySelectorAll('button').forEach(b => {
        b.classList.remove('active', 'bg-orange-50', 'text-orange-500', 'border-orange-500');
        b.classList.add('bg-gray-50', 'text-gray-500', 'border-transparent');
    });

    btn.classList.add('active', 'bg-orange-50', 'text-orange-500', 'border-orange-500');
    btn.classList.remove('bg-gray-50', 'text-gray-500', 'border-transparent');
}
function handleAddClick(id) {
  const item = menuData.find(i => i.id === id);
  if (!item) return;

  // å°åƒï¼šæ— è§„æ ¼ç›´æ¥åŠ 
  if (!DRINK_CATEGORIES.includes(item.category)) {
    cartIncByProductIdIfNoSpecs(item);
    renderOrderPage(); // è®©æ•°é‡ç«‹åˆ»åˆ·æ–°
    return;
  }

  // é¥®å“ï¼šå¼€è§„æ ¼å¼¹çª—
  openSpecs(id);
}
function orderMinus(id) {
  cartDecByProductId(id); // ä½ å·²æœ‰çš„æŒ‰å•†å“IDå‡æ•°é‡
  renderOrderPage();
  if (typeof renderCartPage === 'function') renderCartPage();
}
function addToCartDirect(item) {
  const snapshot = {
    ...item,
    cartId: `${item.id}_${Date.now()}`,
    specs: '' // å°åƒæ— è§„æ ¼
  };
  cart.push(snapshot);
  persistCart();
  updateCartUI();
}
    
// ä½ å½“å‰å“ªäº›åˆ†ç±»å±äºé¥®å“ï¼ˆéœ€è¦è§„æ ¼ï¼‰
const DRINK_CATEGORIES = ['å¥¶ç›–ç³»åˆ—', 'åº—é•¿æ¨è', 'æœèŒ¶ç³»åˆ—', 'é²œæ¦¨æœæ±'];

function confirmAddToCart() {
    if (!currentItem) return;

    let finalSpecs = '';

    if (DRINK_CATEGORIES.includes(currentItem.category)) {
        const activeButtons = document.querySelectorAll('#spec-modal .spec-btn.active');
        finalSpecs = [...activeButtons]
            .map(btn => btn.innerText.split('(')[0].trim())
            .join(' / ');
    }

    // ä¸ºäº†åç«¯å’Œå‘˜å·¥ç«¯åŒè¯­å±•ç¤ºï¼šåœ¨è´­ç‰©è½¦é‡Œå…ˆå­˜ä¸­è‹±å¿«ç…§ï¼ˆå½“å‰æœ¬åœ° en å…ˆå ä½ï¼‰
    const itemSnapshot = {
        ...currentItem,
        cartId: `${currentItem.id}_${Date.now()}`,
        specs: finalSpecs,
        product_name_zh_snapshot: currentItem.name_zh || currentItem.name,
        product_name_en_snapshot: currentItem.name_en || currentItem.name,
        category_zh_snapshot: currentItem.category_zh || currentItem.category,
        category_en_snapshot: currentItem.category_en || currentItem.category
    };

    cartInc(currentItem, finalSpecs);

updateCartUI();
renderOrderPage();   // âœ… å…³é”®ï¼šç«‹åˆ»åˆ·æ–°ç‚¹å•é¡µæ•°é‡
renderCartPage();

closeModal();

    if (tg && typeof tg.showAlert === 'function') {
        // è¿™ä¸ªæç¤ºåœ¨ Telegram ä¸­ä¼šå¼¹
        // tg.showAlert(t('added'));
    }
}

// ---- è®¢å•æ„é€ ï¼ˆç»™åç«¯ / Telegram åŒæ—¶ä½¿ç”¨ï¼‰----
function buildOrderPayload() {
    const total = cart.reduce((sum, item) => sum + Number(item.price || 0), 0);

    return {
        source: 'telegram_mini_app',
        customerLang: appLang, // ç”¨æˆ·ä¸‹å•è¯­è¨€
        // å‘˜å·¥ç«¯å»ºè®®å›ºå®šåŒè¯­æ˜¾ç¤ºï¼Œä¸ä¾èµ– customerLang
        items: cart.map((item, idx) => ({
            lineNo: idx + 1,
            productId: item.id,
            productNameZh: item.product_name_zh_snapshot || item.name_zh || item.name,
            productNameEn: item.product_name_en_snapshot || item.name_en || item.name,
            categoryZh: item.category_zh_snapshot || item.category_zh || item.category,
            categoryEn: item.category_en_snapshot || item.category_en || item.category,
            specs: item.specs || '',
            unitPrice: Number(item.price || 0),
            quantity: 1,
            lineTotal: Number(item.price || 0)
        })),
        subtotal: total,
        total: total,
        currency: 'PHP',
        paymentMethod: 'pay_at_store', // MVPï¼šåˆ°åº—ä»˜æ¬¾
        paymentStatus: 'unpaid',
        status: 'pending',
        createdAt: new Date().toISOString()
    };
}

// ---- æäº¤è®¢å•ï¼šä¼˜å…ˆåç«¯ï¼Œå¤±è´¥åˆ™å›é€€ Telegram ----
async function submitOrder() {
  if (!cart || cart.length === 0) {
    notify('è´­ç‰©è½¦æ˜¯ç©ºçš„');
    return;
  }

  const payload = buildOrderPayload();

  // 1) ä¼˜å…ˆèµ°åç«¯æ¥å£ï¼ˆåç«¯å‡†å¤‡å¥½åæ‰“å¼€ USE_BACKENDï¼‰
  if (APP_CONFIG.USE_BACKEND && APP_CONFIG.API_BASE) {
    try {
      const res = await fetch(`${APP_CONFIG.API_BASE}/orders`, {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(payload),
      });

      if (!res.ok) {
        const text = await res.text().catch(() => '');
        throw new Error(`HTTP ${res.status}: ${text}`);
      }

      // åç«¯æˆåŠŸï¼šç»™ç”¨æˆ·æ˜ç¡®åé¦ˆ + æ¸…ç©ºè´­ç‰©è½¦ + è·³è½¬å–å•
      const orderNo = 'TY' + Date.now().toString().slice(-6);
      notify('ä¸‹å•æˆåŠŸï¼è®¢å•å·ï¼š' + orderNo);

      cart = [];
      persistCart();
      updateCartUI();
      renderCartPage();
      switchTab('pickup');
      return;
    } catch (err) {
      console.error('Backend submit failed, fallback to Telegram:', err);
      // åç«¯å¤±è´¥ç»§ç»­èµ° Telegramï¼ˆå®¹é”™ï¼‰
    }
  }

  // 2) æ²¡åç«¯ / åç«¯å¤±è´¥ï¼šå›é€€ Telegram sendData æˆ– mock
  sendOrderToTelegram(payload);

  // MVPï¼šå‰ç«¯ç›´æ¥ç»™æˆåŠŸåé¦ˆï¼ˆçœŸæ­£ç”Ÿäº§è¦ç­‰ bot/åç«¯ç¡®è®¤åå†æç¤ºï¼‰
  const orderNo = 'TY' + Date.now().toString().slice(-6);
  notify('å·²å‘é€è®¢å•ï¼ˆMVPï¼‰ï¼è®¢å•å·ï¼š' + orderNo);

  cart = [];
  persistCart();
  updateCartUI();
  renderCartPage();
  switchTab('pickup');
}

function sendOrderToTelegram(payload) {
    if (!payload) payload = buildOrderPayload();

    if (!tg) {
        console.log('Mock submit payload (not in Telegram):', payload);
        notify('å½“å‰ä¸åœ¨ Telegram ç¯å¢ƒï¼Œè®¢å•æ•°æ®å·²è¾“å‡ºåˆ°æ§åˆ¶å°ï¼ˆF12 â†’ Consoleï¼‰');
        return;
    }

    try {
        tg.sendData(JSON.stringify(payload));
        // æœ‰äº›åœºæ™¯ä¼šç›´æ¥äº¤ç»™ bot å¤„ç†ï¼Œä¸ä¸€å®šè¦ close
        // tg.close();
    } catch (e) {
        console.error('tg.sendData failed:', e);
        notify(t('submitFail'));
    }
}

// ---- èœå•æ¥å£ï¼ˆåç«¯æ¥å¥½åä½¿ç”¨ï¼‰----
// åç«¯è¿”å›å»ºè®®å­—æ®µï¼šid, category_zh, category_en, name_zh, name_en, price, desc_zh, desc_en, icon, status
async function loadMenuFromBackend() {
    if (!APP_CONFIG.USE_BACKEND || !APP_CONFIG.API_BASE) return;

    try {
        const res = await fetch(`${APP_CONFIG.API_BASE}/menu`);
        if (!res.ok) throw new Error(`HTTP ${res.status}`);
        const data = await res.json();

        if (!Array.isArray(data)) throw new Error('Menu API must return array');

        // æ›¿æ¢ const æ•°ç»„å†…å®¹ï¼ˆä¸èƒ½ç›´æ¥ menuData = dataï¼Œå› ä¸º menuData æ˜¯ constï¼‰
        menuData.length = 0;
        data.forEach(row => {
            menuData.push({
                id: row.id,
                category: row.category_zh || row.category || 'æœªåˆ†ç±»', // å†…éƒ¨é€»è¾‘ä»ç”¨ä¸­æ–‡é”®æ›´ç¨³
                category_zh: row.category_zh || row.category || 'æœªåˆ†ç±»',
                category_en: row.category_en || row.category_zh || row.category || 'Uncategorized',
                name: row.name_zh || row.name || '',
                name_zh: row.name_zh || row.name || '',
                name_en: row.name_en || row.name_zh || row.name || '',
                price: Number(row.price || 0),
                desc: row.desc_zh || row.desc || '',
                desc_zh: row.desc_zh || row.desc || '',
                desc_en: row.desc_en || row.desc_zh || row.desc || '',
                icon: row.icon || 'ğŸ¥¤'
            });
        });

        syncMenuDisplayByLang();

        if (typeof renderOrderPage === 'function') renderOrderPage();
        console.log('Menu loaded from backend:', menuData.length);
    } catch (err) {
        console.error('loadMenuFromBackend failed:', err);
    }
}

// ---- åˆå§‹åŒ– ----
(function initAppPatch() {
    ensureMenuBilingualFields();

    const savedLang = localStorage.getItem('appLang');
    if (savedLang === 'zh' || savedLang === 'en') appLang = savedLang;

    syncMenuDisplayByLang();
    updateLangButtonsUI();
    applyLanguageToStaticUI();

    // å…ˆæ¸²æŸ“æœ¬åœ°èœå•ï¼ˆç¡®ä¿æœ¬åœ°å¯è¿è¡Œï¼‰
    if (typeof renderOrderPage === 'function') renderOrderPage();

    // å†å°è¯•æ‹‰åç«¯ï¼ˆåç«¯æ¥å¥½åå¼€å¯ USE_BACKENDï¼‰
    loadMenuFromBackend();

    // é»˜è®¤æ˜¾ç¤ºé¦–é¡µï¼ˆä¿ç•™ä½ çš„åŸé€»è¾‘ï¼‰
    switchTab('home');
    updateCartUI();
    setTimeout(() => {
        if (document.getElementById('btn-å¥¶ç›–ç³»åˆ—')) scrollToCat('å¥¶ç›–ç³»åˆ—');
    }, 100);
})();
// window.orderMinus = orderMinus;
window.cartLineInc = cartLineInc;
window.cartLineDec = cartLineDec;
</script>
</body>
</html>



